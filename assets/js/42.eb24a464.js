(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{507:function(t,e,r){t.exports=r.p+"assets/img/bjg.2e040421.png"},580:function(t,e,r){"use strict";r.r(e);var n=r(13),a=Object(n.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"数据库物理外键移除原因"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据库物理外键移除原因"}},[t._v("#")]),t._v(" 数据库物理外键移除原因")]),t._v(" "),n("p",[t._v("这里准备好了我们此阶段需要使用的表结构，可以先大概看一下下图")]),t._v(" "),n("p",[n("img",{attrs:{src:r(507),alt:""}})]),t._v(" "),n("p",[t._v("pdman 项目文件在 GitHub 仓库的 "),n("a",{attrs:{href:"https://github.com/zq99299/note-architect/tree/main/docs/ztc/01",target:"_blank",rel:"noopener noreferrer"}},[t._v("此页面同级目录"),n("OutboundLink")],1),t._v(" 下，文件名称是 "),n("a",{attrs:{href:"https://raw.githubusercontent.com/zq99299/note-architect/main/docs/ztc/01/pdm.json",target:"_blank",rel:"noopener noreferrer"}},[t._v("pdm.json"),n("OutboundLink")],1),t._v(" ，可以使用 pdamn 直接打开该文件，就能看到如上图所示的表结构设计了。")]),t._v(" "),n("h2",{attrs:{id:"数据库外键"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据库外键"}},[t._v("#")]),t._v(" 数据库外键")]),t._v(" "),n("p",[t._v("这里可以看到都没有 "),n("strong",[t._v("添加数据库外键")]),t._v("，原因基于以下几点考虑：")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("性能影响：在分布式项目里、在大型的互联网项目里面，对于整体的性能会有一定的影响")])]),t._v(" "),n("li",[n("p",[t._v("热更新：不停机维护")]),t._v(" "),n("p",[t._v("热更新时某些场景下的外键可能会影响到还没有更新的实例。")]),t._v(" "),n("p",[t._v("因为外键是强一致性的，和分布式是冲突的")])]),t._v(" "),n("li",[n("p",[t._v("降低耦合度")]),t._v(" "),n("p",[t._v("物理外键不存在，但是在逻辑上还是需要的")])]),t._v(" "),n("li",[n("p",[t._v("数据分库分表")]),t._v(" "),n("p",[t._v("由于耦合度太高，做分裤分表时，就很难做了。")]),t._v(" "),n("p",[t._v("比如：用户表和用户地址，如果有物理外键，你只能将同一个关系的数据都分片到同一个库的同一个表中，这就大大的限制了灵活性")])])])])}),[],!1,null,null,null);e.default=a.exports}}]);